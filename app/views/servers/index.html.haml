- content_for :page_title do
  %h1.header
    All Servers
  %p
    Summary of all your servers
    %span#timer-text
      Next update in 4 seconds.
.row
  .span11  
    %table#server-list.zebra-striped
      %tr
        %th Name
        %th Load
        %th Memory
        %th Swap
        %th Action
      - for server in @servers
        %tr
          %td
            = link_to server.name, :controller => :statistics, :id => server.id
          %td
            %span.label.warning
              = server.cpuload
          %td
            %span.label.warning
              = number_to_percentage(server.mem_percentage, :precision => 2, :strip_insignificant_zeros => true)
          %td
            %span.label.warning
              = number_to_percentage(server.swap_percentage, :precision => 2, :strip_insignificant_zeros => true)
          %td
            = link_to 'Rename', rename_server_path(server), :rel => 'facebox'
            = link_to 'Delete', remove_server_path(server), :rel => 'facebox'
            - if server.url != nil
              = link_to 'Edit', agentedit_server_path(server)
            - else
              = link_to 'Edit', edit_server_path(server)

  .span5
    .block-message.warning.alert-message
      - if current_user.account.server_limit_reached?
        %h3 Monitor More servers?
        %p 
          You'll need to upgrade your plan if you want to monitor any more servers.
      - else
        %h3 Add Another Server

        %p 
          You still have capacity to add more servers under your current plan.
          
        %p
          = link_to 'Add Server', new_server_path, :class => 'btn info'

- if @servers.length > 0
  = render 'servers/public_code', :servers => @servers
